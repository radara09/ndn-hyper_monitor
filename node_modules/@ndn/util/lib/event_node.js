import { __importDefault, __importStar } from "tslib";
import _cjsDefaultImport0 from "minimalistic-assert"; const assert = __importDefault(_cjsDefaultImport0).default;
export { CustomEvent } from "./platform_node.js";
/**
 * Keep records on whether an event listener has been added.
 * This may allow EventTarget subclass to skip certain event generation code paths.
 * Tracking is imprecise: it does not consider 'once' and 'removeEventListener'.
 * @param target EventTarget to override.
 * @returns map from event type to whether listeners may exist.
 */
export function trackEventListener(target) {
    const maybeHaveEventListener = {};
    const superAddEventListener = target.addEventListener;
    assert(superAddEventListener);
    Object.defineProperty(target, "addEventListener", {
        configurable: true,
        value(...args) {
            maybeHaveEventListener[args[0]] = true;
            superAddEventListener.call(this, ...args);
        },
    });
    return maybeHaveEventListener;
}
